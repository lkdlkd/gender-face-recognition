{% extends 'base.html' %}

{% block title %}Trang chủ - Điểm Danh Nhân Viên{% endblock %}

{% block page_title %}Hệ Thống Điểm Danh Nhân Viên{% endblock %}

{% block content %}
<div class="dashboard">
    <!-- Welcome Banner -->
    <div class="welcome-banner">
        <div class="welcome-content">
            <h2>Chào mừng đến với Hệ thống Điểm Danh</h2>
            <p>Nhận diện khuôn mặt + Phân tích giới tính + Cảm xúc</p>
            <p class="time-info">
                <i class="fas fa-clock"></i> Giờ VN: <span id="vnTime">--:--:--</span>
                | <i class="fas fa-business-time"></i> Giờ làm việc: <strong>09:30</strong>
            </p>
        </div>
        <div class="welcome-icon">
            <i class="fas fa-face-smile"></i>
        </div>
    </div>

    <!-- Stats Cards -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon blue">
                <i class="fas fa-users"></i>
            </div>
            <div class="stat-info">
                <h3>{{ stats.total_employees }}</h3>
                <p>Tổng nhân viên</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon green">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-info">
                <h3>{{ stats.on_time_count }}</h3>
                <p>Đúng giờ hôm nay</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon red">
                <i class="fas fa-clock"></i>
            </div>
            <div class="stat-info">
                <h3>{{ stats.late_count }}</h3>
                <p>Muộn hôm nay</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon purple">
                <i class="fas fa-percentage"></i>
            </div>
            <div class="stat-info">
                <h3>{{ stats.attendance_rate }}%</h3>
                <p>Tỷ lệ điểm danh</p>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <h3><i class="fas fa-bolt"></i> Thao tác nhanh</h3>
        <div class="action-buttons">
            <a href="{{ url_for('register_page') }}" class="action-btn primary">
                <i class="fas fa-user-plus"></i>
                <span>Đăng ký nhân viên mới</span>
            </a>
            <a href="{{ url_for('attendance_page') }}" class="action-btn success">
                <i class="fas fa-camera"></i>
                <span>Bắt đầu điểm danh</span>
            </a>
            <a href="{{ url_for('employees_page') }}" class="action-btn info">
                <i class="fas fa-list"></i>
                <span>Xem danh sách NV</span>
            </a>
            <a href="/api/export/csv" class="action-btn warning">
                <i class="fas fa-file-csv"></i>
                <span>Xuất báo cáo CSV</span>
            </a>
        </div>
    </div>
</div>

<script>
function updateVNTime() {
    const now = new Date();
    const h = now.getHours().toString().padStart(2, '0');
    const m = now.getMinutes().toString().padStart(2, '0');
    const s = now.getSeconds().toString().padStart(2, '0');
    document.getElementById('vnTime').textContent = `${h}:${m}:${s}`;
}
setInterval(updateVNTime, 1000);
updateVNTime();
</script>
{% endblock %}